"""
M√≥dulo procesador_texto.py

Implementa la clase 'ProcesadorTexto', encargada de la limpieza
y normalizaci√≥n de texto para el an√°lisis emocional en EduMoodBot.
"""

import re
from typing import Any
from .procesador import Procesador


class ProcesadorTexto(Procesador):
    """
    Procesa texto para an√°lisis emocional, incluyendo limpieza y normalizaci√≥n.

    Hereda de:
        Procesador
    """

    def procesar(self) -> None:
        """
        Implementaci√≥n polim√≥rfica del m√©todo procesar().
        Ejecuta el flujo de procesamiento del texto almacenado en self.datos.
        """
        if not isinstance(self.datos, str):
            print("‚ö†Ô∏è No se proporcion√≥ un texto v√°lido para procesar.")
            return

        print("üßπ Iniciando procesamiento de texto...")
        texto_limpio = self.procesar_texto(self.datos)
        self.datos = texto_limpio
        print("‚úÖ Texto procesado correctamente:", texto_limpio)

    def procesar_texto(self, texto: str) -> str:
        """
        Limpia y normaliza un texto de entrada.

        Par√°metros
        ----------
        texto : str
            Texto original.

        Retorna
        -------
        str
            Texto limpio y normalizado.
        """
        texto_limpio = re.sub(r"[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë\s]", "", texto)
        texto_limpio = re.sub(r"\s+", " ", texto_limpio).strip().lower()
        return texto_limpio
